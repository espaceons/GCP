{% extends 'formations/base.html' %} {% block formations_content %}
  <div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1><i class="bi bi-box"></i> Packs de Formation</h1>
      {% if user.is_staff %}
        <a href="{% url 'param:pack_add' %}" class="btn btn-primary"><i class="bi bi-plus-circle"></i> Nouveau Pack</a>
      {% endif %}
    </div>

    {% if packs %}
      <div class="row">
        {% for pack in packs %}
          <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 shadow-sm">
              <div class="card-header bg-primary text-white">
                <h5 class="mb-0">{{ pack.nom }}</h5>
              </div>
              <div class="card-body">
                <p>
                  <i class="bi bi-calendar"></i> {{ pack.date_debut|date:'d/m/Y' }} -
                  {{ pack.date_fin|date:'d/m/Y' }}
                </p>
                <p>
                  <i class="bi bi-cash"></i> Prix : {{ pack.prix }} DT
                </p>
                <p>
                  <i class="bi bi-people"></i> Max : {{ pack.nb_apprenants_max }}
                  apprentis
                </p>

                <h6 class="mt-3">ðŸ“˜ Programmes inclus :</h6>
                <ul class="list-group list-group-flush">
                  {% for prog in pack.programmes.all %}
                    <li class="list-group-item">{{ prog.titre }}</li>
                  {% empty %}
                    <li class="list-group-item text-muted">Aucun programme dÃ©fini</li>
                  {% endfor %}
                </ul>
              </div>
              <div class="card-footer d-flex justify-content-between">
                <a href="{% url 'param:pack_edit' pack.id %}" class="btn btn-sm btn-warning"><i class="bi bi-pencil"></i> Modifier</a>
                <a href="{% url 'param:pack_delete' pack.id %}" class="btn btn-sm btn-danger" onclick="return confirm('Supprimer ce pack ?');"><i class="bi bi-trash"></i> Supprimer</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-info">
        <i class="bi bi-info-circle"></i> Aucun pack de formation disponible.
      </div>
    {% endif %}
  </div>
{% endblock %}
